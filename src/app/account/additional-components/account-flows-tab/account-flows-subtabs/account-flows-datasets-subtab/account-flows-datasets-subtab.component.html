<div *ngIf="accountFlowsCardsData$ | async as cardsData">
    <div *ngIf="cardsData.nodes.length; else noCardsBlock">
        <div class="d-flex justify-content-end my-4 mb-2">
            <button
                (click)="refreshNow()"
                class="border-1 bg-light border rounded-2 px-2 btn btn-sm d-flex justify-content-between align-items-center"
            >
                <mat-icon class="text-muted fs-4 d-block">cached</mat-icon>
                <span class="fs-12 me-2 d-block"> Refresh now</span>
            </button>
        </div>
        <div class="d-flex justify-content-end mt-4 mb-2 fw-500">Total processes: {{ cardsData.totalCount }}</div>
        <div class="cards mt-4" data-test-id="cards">
            <ng-container *ngFor="let card of cardsData.nodes">
                <div *ngIf="card.__typename === 'DatasetFlowProcess'">
                    <app-dataset-flow-process-card
                        [datasetBasics]="card.dataset"
                        [summary]="card.summary"
                        (updateNowEmitter)="updateNow($event)"
                        (toggleStateDatasetCardEmitter)="toggleStateDatasetCard($event)"
                    />
                </div>
                <div *ngIf="card.__typename === 'WebhookFlowSubProcess'">
                    <app-webhook-flow-process-card
                        *ngIf="card.parentDataset"
                        [datasetBasics]="card.parentDataset"
                        [summary]="card.summary"
                        [subscriptionId]="card.id"
                        [subscriptionName]="card.name"
                        (toggleWebhookCardStateEmitter)="toggleWebhookCardState($event)"
                        (editWebhookCardEmitter)="editWebhookCard($event)"
                    />
                </div>
            </ng-container>
        </div>
        <div class="mt-50px">
            <app-pagination
                [currentPage]="cardsData.pageInfo.currentPage + 1"
                [pageInfo]="cardsData.pageInfo"
                (pageChangeEvent)="onPageChange($event)"
            ></app-pagination>
        </div>
    </div>
    <ng-template #noCardsBlock>
        <div class="mt-4" data-test-id="empty-cards-block">No cards belonging to this account</div>
    </ng-template>
</div>
