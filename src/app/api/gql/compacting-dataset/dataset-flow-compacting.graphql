mutation datasetFlowCompacting(
  $datasetId: DatasetID!
  $datasetFlowType: DatasetFlowType!
  $compactingArgs: CompactingConditionInput!
) {
  datasets {
    byId(datasetId: $datasetId) {
      flows {
        configs {
          setConfigCompacting(datasetFlowType: $datasetFlowType, compactingArgs: $compactingArgs) {
            ... on SetFlowConfigSuccess {
              message
              config {
                compacting {
                  ... on CompactingFull {
                    maxSliceSize
                    maxSliceRecords
                  }

                  ... on CompactingMetadataOnly {
                    recursive
                  }
                }
              }
            }

            ... on FlowIncompatibleDatasetKind {
              message
              expectedDatasetKind
              actualDatasetKind
            }

            ... on FlowTypeIsNotSupported {
              message
            }

            ... on FlowInvalidCompactingConfig {
              reason
              message
            }
          }
        }
      }
    }
  }
}
