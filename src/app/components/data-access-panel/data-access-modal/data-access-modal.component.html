<div *ngIf="protocols$ | async as protocols">
    <header class="select-menu-header">
        <div class="select-menu-title text-bold d-flex align-item-center d-flex align-items-center">Protocols</div>
        <a class="fs-12">Manage API tokens</a>
    </header>
    <div class="custom-container my-4">
        <div class="layout-sidebar">
            <div class="pr-md-4 pr-0">
                <div>
                    <nav>
                        <ul role="list" class="action-list d-flex flex-column gap-1">
                            <ng-container *ngFor="let navItem of accessDataOptions">
                                <li
                                    [class.action-list-item--nav-active]="activeTab === navItem.activeTab"
                                    class="action-list-item"
                                >
                                    <a
                                        class="action-list-content d-flex align-items-center"
                                        (click)="navigateToSection(navItem.activeTab)"
                                        attr.data-test-id="action-list-{{ navItem.activeTab }}-tab"
                                    >
                                        <span
                                            class="text-muted pt-2 mr-1 d-inline-block"
                                            [class]="navItem.iconClassName"
                                        >
                                            <mat-icon class="fs-4">{{ navItem.iconName }}</mat-icon>
                                        </span>
                                        <span class="action-list-item-label d-inline-block"> {{ navItem.name }} </span>
                                    </a>
                                </li>
                            </ng-container>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.LINK">
            <div class="flex-column px-4 pb-4">
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Share this dataset on the Web:</span>
                </div>

                <div class="select-menu-item align-items-start p-0 border-0 mb-2">
                    <div class="input-group mb-2">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.webLink.url"
                            #clipboardReference
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardReference.value)"
                                data-test-id="copyToClipboard-clipboardReference"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="input-group mt-1">
                    <mat-checkbox color="primary" disabled="true">
                        <span class="fs-12">Stable</span>
                    </mat-checkbox>
                    <mat-icon
                        class="text-muted fs-5 help-icon"
                        matTooltip="Include the unique identifier of the dataset. This guarantees that link will point to the same dataset even if its name and owner changes over time."
                        [matTooltipPosition]="'right'"
                        >help_outline</mat-icon
                    >
                </div>
                <div class="input-group mt-1">
                    <mat-checkbox color="primary" disabled="true">
                        <span class="fs-12">Frozen</span>
                    </mat-checkbox>
                    <mat-icon
                        class="text-muted fs-5 help-icon"
                        matTooltip="Link to the state of a dataset at this specific point in time, for reproducibility. No matter how much time passes, everyone using this link will the the exact same data."
                        [matTooltipPosition]="'right'"
                        >help_outline</mat-icon
                    >
                </div>
                <div class="input-group mt-1 mb-3">
                    <mat-checkbox color="primary" disabled="true">
                        <span class="fs-12">DOI</span>
                    </mat-checkbox>
                    <mat-icon
                        class="text-muted fs-5 help-icon"
                        matTooltip="Produce a DOI.org identifier used for scientific publications."
                        [matTooltipPosition]="'right'"
                        >help_outline</mat-icon
                    >
                </div>
                <div class="w-100">
                    <mat-divider class="my-2" />
                    <div class="d-flex align-items-center">
                        <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                        <span class="fs-12">
                            <a href="https://docs.kamu.dev/odf/spec/#dataset-identity" target="_blank" class="fs-12"
                                >Dataset identity and references</a
                            >
                        </span>
                    </div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.KAMU_CLI">
            <div class="flex-column w-100 px-4 pb-4">
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Pull dataset to local machine:</span>
                </div>
                <div class="align-items-start p-0 border-0 mb-4">
                    <div class="input-group">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.cli.pullCommand"
                            #clipboardKamuCliPull
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardKamuCliPull.value)"
                                data-test-id="copyToClipboard-clipboardKamuCliPull"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Push local updates to repository:</span>
                </div>
                <div class="align-items-start p-0 border-0 mb-4">
                    <div class="input-group">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.cli.pushCommand"
                            #clipboardKamuCliPush
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardKamuCliPush.value)"
                                data-test-id="copyToClipboard-clipboardKamuCliPush"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="w-100">
                    <mat-divider class="my-2" />
                    <div class="d-flex align-items-center">
                        <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                        <span class="fs-12">
                            <a href="https://docs.kamu.dev/cli/collab/repositories/" target="_blank" class="fs-12"
                                >Working with repositories in Kamu CLI</a
                            >
                        </span>
                    </div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.REST">
            <div class="flex-column px-4 pb-4 w-100">
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Access last few events:</span>
                </div>
                <div class="select-menu-item align-items-start p-0 border-0 mb-4">
                    <div class="input-group">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.rest.tailUrl"
                            #clipboardRestUrlTail
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardRestUrlTail.value)"
                                data-test-id="copyToClipboard-clipboardRestUrlTail"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Execute an arbitrary SQL query:</span>
                </div>
                <div class="select-menu-item align-items-start p-0 border-0 mb-4">
                    <div class="input-group">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.rest.queryUrl"
                            #clipboardRestUrlQuery
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardRestUrlQuery.value)"
                                data-test-id="copyToClipboard-clipboardRestUrlQuery"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Push data (dataset must have a push source defined):</span>
                </div>
                <div class="select-menu-item align-items-start p-0 border-0 mb-4">
                    <div class="input-group">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.rest.pushUrl"
                            #clipboardRestUrlPush
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardRestUrlPush.value)"
                                data-test-id="copyToClipboard-clipboardRestUrlPush"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="w-100">
                    <mat-divider class="my-2" />
                    <div class="d-flex align-items-center">
                        <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                        <span class="fs-12">
                            <a href="https://docs.kamu.dev/node/protocols/rest-api/" target="_blank" class="fs-12"
                                >REST API documentation</a
                            >
                        </span>
                    </div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.SQL">
            <div class="flex-column px-4 pb-4">
                <fieldset class="fieldset-border w-100 mb-4">
                    <legend class="fieldset-border">FlightSQL</legend>
                    <div class="input-group mb-1">
                        <span class="fs-12 text-muted"> Connect using FlightSQL:</span>
                    </div>
                    <div class="select-menu-item align-items-start p-0 border-0 mb-2">
                        <div class="input-group">
                            <input
                                type="text"
                                class="form-control fs-12 rounded"
                                data-autoselect=""
                                [value]="protocols.flightsql.url"
                                #clipboardFlightSQL
                                readonly
                            />
                            <div class="input-group-button ms-1">
                                <button
                                    (click)="copyToClipboard($event, clipboardFlightSQL.value)"
                                    data-test-id="copyToClipboard-clipboardFlightSQL"
                                    aria-label="Copy to clipboard"
                                    class="copy-button ms-1"
                                    data-copy-feedback="Copied!"
                                    tabindex="0"
                                    role="button"
                                >
                                    <div style="position: relative; display: inline-block">
                                        <svg-icon name="copy" />
                                    </div>
                                    <div style="position: relative; display: none">
                                        <svg-icon name="checked" />
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="w-100 mt-3">
                        <div class="d-flex align-items-center">
                            <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                            <span class="fs-12">
                                <a href="https://docs.kamu.dev/node/protocols/flight-sql/" target="_blank" class="fs-12"
                                    >FlightSQL protocol documentation</a
                                >
                            </span>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="fieldset-border w-100 mb-4">
                    <legend class="fieldset-border">JDBC</legend>
                    <div class="input-group mb-1">
                        <span class="fs-12 text-muted"> Connect using JDBC:</span>
                    </div>
                    <div class="select-menu-item align-items-start p-0 border-0 mb-2">
                        <div class="input-group">
                            <input
                                type="text"
                                class="form-control fs-12 rounded"
                                data-autoselect=""
                                [value]="protocols.jdbc.url"
                                #clipboardJdbcURL
                                readonly
                            />
                            <div class="input-group-button ms-1">
                                <button
                                    (click)="copyToClipboard($event, clipboardJdbcURL.value)"
                                    data-test-id="copyToClipboard-clipboardJdbcURL"
                                    aria-label="Copy to clipboard"
                                    class="copy-button ms-1"
                                    data-copy-feedback="Copied!"
                                    tabindex="0"
                                    role="button"
                                >
                                    <div style="position: relative; display: inline-block">
                                        <svg-icon name="copy" />
                                    </div>
                                    <div style="position: relative; display: none">
                                        <svg-icon name="checked" />
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="w-100 mt-3">
                        <div class="d-flex align-items-center">
                            <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                            <span class="fs-12">
                                <a href="https://docs.kamu.dev/node/protocols/jdbc/" target="_blank" class="fs-12"
                                    >JDBC adapter documentation</a
                                >
                            </span>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="fieldset-border w-100 mb-4">
                    <legend class="fieldset-border">Postgres</legend>
                    <div class="input-group mb-1">
                        <span class="fs-12 text-muted"> Connect using Postgres wire protocol:</span>
                    </div>
                    <div class="select-menu-item align-items-start p-0 border-0 mb-2">
                        <div class="input-group">
                            <input
                                type="text"
                                class="form-control fs-12 rounded"
                                data-autoselect=""
                                [value]="protocols.postgresql.url"
                                #clipboardPostgresURL
                                readonly
                            />
                            <div class="input-group-button ms-1">
                                <button
                                    (click)="copyToClipboard($event, clipboardPostgresURL.value)"
                                    data-test-id="copyToClipboard-clipboardPostgresURL"
                                    aria-label="Copy to clipboard"
                                    class="copy-button ms-1"
                                    data-copy-feedback="Copied!"
                                    tabindex="0"
                                    role="button"
                                >
                                    <div style="position: relative; display: inline-block">
                                        <svg-icon name="copy" />
                                    </div>
                                    <div style="position: relative; display: none">
                                        <svg-icon name="checked" />
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="w-100 mt-3">
                        <div class="d-flex align-items-center">
                            <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                            <span class="fs-12">
                                <a href="https://docs.kamu.dev/node/protocols/postgres/" target="_blank" class="fs-12"
                                    >Postgres adapter documentation</a
                                >
                            </span>
                        </div>
                    </div>
                </fieldset>
            </div>
        </ng-container>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.STREAM">
            <div class="flex-column w-100 px-4 pb-4">
                <fieldset class="fieldset-border w-100 mb-4">
                    <legend class="fieldset-border">WebSocket</legend>
                    <div class="input-group mb-1">
                        <span class="fs-12 text-muted"> Stream data using WebSocket:</span>
                    </div>
                    <div class="select-menu-item align-items-start p-0 border-0 mb-2">
                        <div class="input-group">
                            <input
                                type="text"
                                class="form-control fs-12 rounded"
                                data-autoselect=""
                                [value]="protocols.websocket.url"
                                #clipboardWebsocketURL
                                readonly
                            />
                            <div class="input-group-button ms-1">
                                <button
                                    (click)="copyToClipboard($event, clipboardWebsocketURL.value)"
                                    data-test-id="copyToClipboard-clipboardWebsocketURL"
                                    aria-label="Copy to clipboard"
                                    class="copy-button ms-1"
                                    data-copy-feedback="Copied!"
                                    tabindex="0"
                                    role="button"
                                >
                                    <div style="position: relative; display: inline-block">
                                        <svg-icon name="copy" />
                                    </div>
                                    <div style="position: relative; display: none">
                                        <svg-icon name="checked" />
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="w-100 mt-3">
                        <div class="d-flex align-items-center">
                            <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                            <span class="fs-12">
                                <a href="https://docs.kamu.dev/node/protocols/websocket/" target="_blank" class="fs-12"
                                    >WebSocket API documentation</a
                                >
                            </span>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="fieldset-border w-100 mb-4">
                    <legend class="fieldset-border">Kafka</legend>
                    <div class="input-group mb-1">
                        <span class="fs-12 text-muted"> Stream data using Kafka:</span>
                    </div>
                    <div class="select-menu-item align-items-start p-0 border-0 mb-2">
                        <div class="input-group">
                            <input
                                type="text"
                                class="form-control fs-12 rounded"
                                data-autoselect=""
                                [value]="protocols.kafka.url"
                                #clipboardKafka
                                readonly
                            />
                            <div class="input-group-button ms-1">
                                <button
                                    (click)="copyToClipboard($event, clipboardKafka.value)"
                                    data-test-id="copyToClipboard-clipboardKafka"
                                    aria-label="Copy to clipboard"
                                    class="copy-button ms-1"
                                    data-copy-feedback="Copied!"
                                    tabindex="0"
                                    role="button"
                                >
                                    <div style="position: relative; display: inline-block">
                                        <svg-icon name="copy" />
                                    </div>
                                    <div style="position: relative; display: none">
                                        <svg-icon name="checked" />
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="w-100 mt-3">
                        <div class="d-flex align-items-center">
                            <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                            <span class="fs-12">
                                <a href="https://docs.kamu.dev/node/protocols/kafka/" target="_blank" class="fs-12"
                                    >Kafka broker documentation</a
                                >
                            </span>
                        </div>
                    </div>
                </fieldset>
            </div>
        </ng-container>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.CODE">
            <div class="flex-column">Feature comming soon</div>
        </ng-container>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.ODATA">
            <div class="flex-column w-100 px-4 pb-4">
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Service endpoint:</span>
                </div>
                <div class="select-menu-item align-items-start p-0 border-0 mb-2">
                    <div class="input-group mb-4">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.odata.serviceUrl"
                            #clipboardODataURLService
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardODataURLService.value)"
                                data-test-id="copyToClipboard-clipboardODataURLService"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="input-group mb-1">
                    <span class="fs-12 text-muted"> Current dataset as a collection:</span>
                </div>
                <div class="select-menu-item align-items-start p-0 border-0 mb-4">
                    <div class="input-group">
                        <input
                            type="text"
                            class="form-control fs-12 rounded"
                            data-autoselect=""
                            [value]="protocols.odata.collectionUrl"
                            #clipboardODataURLCollection
                            readonly
                        />
                        <div class="input-group-button ms-1">
                            <button
                                (click)="copyToClipboard($event, clipboardODataURLCollection.value)"
                                data-test-id="copyToClipboard-clipboardODataURLCollection"
                                aria-label="Copy to clipboard"
                                class="copy-button ms-1"
                                data-copy-feedback="Copied!"
                                tabindex="0"
                                role="button"
                            >
                                <div style="position: relative; display: inline-block">
                                    <svg-icon name="copy" />
                                </div>
                                <div style="position: relative; display: none">
                                    <svg-icon name="checked" />
                                </div>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="w-100">
                    <mat-divider class="my-2" />
                    <div class="d-flex align-items-center">
                        <mat-icon class="text-muted fs-5 pt-1">info</mat-icon>
                        <span class="fs-12">
                            <a href="https://docs.kamu.dev/node/protocols/odata/" target="_blank" class="fs-12"
                                >OData adapter details</a
                            >
                        </span>
                    </div>
                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="activeTab === dataAccessTabsEnum.EXPORT">
            <div class="flex-column w-100 px-4 pb-4">
                <div class="input-group mb-1 d-flex justify-content-center">
                    <button
                        class="border rounded download-button btn-group-item d-flex justify-content-center align-items-center"
                        disabled="true"
                    >
                        <span class="mr-2 fs-12">Download</span>
                        <mat-icon>arrow_drop_down</mat-icon>
                    </button>
                </div>
            </div>
        </ng-container>
    </div>
</div>
