<div class="text-center mb-4 position-relative align-items-center">
    <input
        class="form-control placeholder-padding-left d-inline"
        type="text"
        name="search-hash"
        [(ngModel)]="searchHash"
        autocomplete="off"
        placeholder="Search by hash"
    />
    <svg-icon name="search"></svg-icon>
    <mat-icon
        *ngIf="searchHash"
        (click)="refreshSearch()"
        class="fs-5 d-inline position-absolute close-position"
        >close</mat-icon
    >
</div>
<div class="mb-4">
    <div class="select-block w-100">
        <div
            class="form-control input-group justify-content-left align-items-center"
        >
            <p class="m-auto position-absolute">Filter:</p>
            <select
                [(ngModel)]="eventType"
                class="border-0 w-100 py-1 outline-none"
                data-test-id="event-type-sort-option"
                id="sortOptionsEventType"
            >
                <option
                    class="py-1"
                    *ngFor="let option of sortOptions"
                    value="{{ option }}"
                >
                    {{ option }}
                </option>
            </select>
        </div>
    </div>
</div>

<div class="d-flex flex-column gap-4" *ngIf="datasetHistory?.history">
    <div
        *ngFor="
            let block of datasetHistory.history
                | eventTypeFilter: eventType
                | blockHashFilter: searchHash
        "
        class="d-flex lh-lg align-items-center justify-content-between"
    >
        <div class="flex-grow-1 no-wrap lh-1">
            <mat-icon class="d-inline align-middle fs-4">tag</mat-icon>
            <app-display-hash
                [value]="block.blockHash"
                [datasetInfo]="datasetInfo"
                [showCopyButton]="false"
            ></app-display-hash>
            <div
                [innerHTML]="highligthHash(block.blockHash, searchHash)"
                class="ms-4 fs-10 text-muted"
            ></div>
        </div>
        <div
            class="me-4 align-self-baseline"
            *ngIf="currentBlockHash === block.blockHash"
        >
            <span class="badge bg-success">current</span>
        </div>
        <div class="">
            <p>{{ block.event.__typename }}</p>
        </div>
    </div>
    <app-pagination
        [currentPage]="currentPage - 1"
        [pageInfo]="datasetHistory.pageInfo"
        (pageChangeEvent)="onPageChange($event)"
    ></app-pagination>
</div>
