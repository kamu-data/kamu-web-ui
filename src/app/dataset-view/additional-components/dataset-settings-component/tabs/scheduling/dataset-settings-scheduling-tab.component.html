<div class="custom-container">
    <h2>Scheduled updates</h2>
    <mat-divider class="mt-1 mb-2" />
    <div class="box mt-3 p-4" *ngIf="isRootDataset">
        <form [formGroup]="form">
            <div class="mt-4 ms-1 px-2 pb-1 d-flex gap-1">
                <mat-slide-toggle
                    color="primary"
                    class="mat-elevation-z0"
                    formControlName="updatesEnabled"
                    data-test-id="ingest-trigger-updates-enabled"
                >
                    <span class="ps-2">Enable automatic updates</span>
                </mat-slide-toggle>
                <app-tooltip-icon class="d-block" [tooltip]="UPDATES_TOOLTIP" />
            </div>
            <div class="d-flex flex-column gap-4">
                <div class="w-100">
                    <app-ingest-trigger-form
                        data-test-id="ingest-trigger-form"
                        [form]="form.controls.ingestTrigger"
                        [updatesEnabledControl]="form.controls.updatesEnabled"
                    />
                </div>
                <div class="w-100">
                    <app-flow-stop-policy-form
                        data-test-id="stop-policy-form"
                        [form]="form.controls.stopPolicy"
                        [updatesEnabledControl]="form.controls.updatesEnabled"
                    />
                </div>
            </div>
            <div class="mt-4 d-flex justify-content-end">
                <button
                    type="button"
                    class="btn btn-success"
                    (click)="saveUpdates()"
                    [disabled]="form.invalid"
                    data-test-id="save-btn"
                >
                    Save
                </button>
            </div>
        </form>
    </div>
</div>
