<div *ngIf="isLoaded; else loadingBlock">
    <form [formGroup]="pollingForm">
        <div class="mt-4 ms-1 px-2 pb-1 d-flex gap-1">
            <mat-slide-toggle color="primary" class="mat-elevation-z0" formControlName="updatesEnabled">
                <span class="ps-2"> {{ updateStateToggleLabel }}</span>
            </mat-slide-toggle>
            <app-tooltip-icon class="d-block" [tooltip]="UPDATES_TOOLTIP" />
        </div>

        <div class="position-relative border border-1 mt-4 rounded-3">
            <div>
                <span class="position-absolute text-muted group-box-label text-uppercase">Triggers</span>
                <div class="p-4">
                    <mat-radio-group
                        class="d-flex flex-column row-gap-4 mt-4"
                        formControlName="__typename"
                        aria-label="Select an option"
                        color="primary"
                    >
                        <mat-radio-button disableRipple="true" [value]="PollingGroupEnum.TIME_DELTA">
                            <app-time-delta-form
                                formControlName="timeDelta"
                                data-test-id="time-delta-form"
                            ></app-time-delta-form>
                        </mat-radio-button>
                        <mat-radio-button [value]="PollingGroupEnum.CRON_5_COMPONENT_EXPRESSION">
                            <app-cron-expression-form
                                formControlName="cron"
                                [showHelpText]="false"
                                data-test-id="cron-expression-form"
                            ></app-cron-expression-form>
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>
        </div>
    </form>
</div>

<ng-template #loadingBlock>
    <div class="position-relative">
        <mat-progress-bar
            data-test-id="ingest-trigger-form-progress-bar"
            class="position-absolute"
            mode="indeterminate"
        />
    </div>
</ng-template>
