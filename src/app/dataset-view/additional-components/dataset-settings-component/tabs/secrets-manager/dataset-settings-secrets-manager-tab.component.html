<div class="w-75 mb-100">
    <h2>Enviroment variables and secrets</h2>
    <mat-divider class="mt-1"></mat-divider>
    <p class="text-muted mt-2 mb-2">Key-value pairs associated with dataset</p>
    <div class="mt-30px box p-4">
        <div class="d-flex justify-content-between align-items-center mt-4">
            <button
                (click)="onAddOrEditRow(-1)"
                class="add-row-button d-flex justify-content-between align-items-center"
            >
                <mat-icon class="text-white fs-4 d-block pt-2px pe-1">add</mat-icon>
                <span class="fs-12 me-2 d-block"> Add row</span>
            </button>
            <div class="text-center position-relative align-items-center">
                <input
                    class="form-control placeholder-padding-left"
                    type="text"
                    autocomplete="off"
                    placeholder="Search by name"
                />
                <svg-icon name="search"></svg-icon>
                <mat-icon class="fs-5 d-inline position-absolute close-position">close</mat-icon>
            </div>
        </div>
        <div class="mt-30px mb-4">
            <div class="content-table mt-4">
                <table mat-table [dataSource]="dataSource" class="w-100 tokens-table" matSort>
                    <!-- Name Column -->
                    <ng-container matColumnDef="key">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 40%" class="fs-14">KEY</th>
                        <td mat-cell *matCellDef="let element" class="mt-2">
                            <div class="position-relative">
                                <input type="text" [disabled]="true" class="form-control w-75" [value]="element.key" />
                                <mat-icon *ngIf="element.secret" class="fs-5 position-absolute secret-key-icon"
                                    >vpn_key</mat-icon
                                >
                            </div>
                        </td>
                    </ng-container>

                    <!-- Added Column -->
                    <ng-container matColumnDef="value">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 40%">VALUE</th>
                        <td mat-cell *matCellDef="let element">
                            <input
                                type="text"
                                [disabled]="true"
                                class="form-control w-75"
                                [value]="element.value"
                                readonly
                            />
                        </td>
                    </ng-container>

                    <!-- Actions Column -->
                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef style="width: 20%"></th>
                        <td mat-cell *matCellDef="let element; let i = index">
                            <button class="edit-button me-3" (click)="onAddOrEditRow(i)">
                                <mat-icon class="fs-4 pt-1">edit</mat-icon>
                            </button>
                            <button class="delete-button" (click)="onDelete(i)">
                                <mat-icon class="fs-4 pt-1">delete</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="DISPLAY_COLUMNS"></tr>
                    <tr mat-row *matRowDef="let row; columns: DISPLAY_COLUMNS"></tr>
                </table>
            </div>
        </div>
    </div>

    <div class="mt-60">
        <app-pagination
            *ngIf="dataSource.data.length"
            [currentPage]="currentPage - 1"
            [pageInfo]="pageBasedInfo"
        ></app-pagination>
    </div>
</div>
