<h2>Webhooks/Manage subscription</h2>
<form [formGroup]="createOrEditSubscriptionForm">
    <div class="box p-4">
        <div class="d-flex flex-column mt-4">
            <label for="" class="form-label">Target URL <span class="text-danger">*</span></label>
            <input
                type="text"
                data-test-id="target-url"
                formControlName="targetUrl"
                class="w-100 form-control"
                #targetUrl
            />
            <div
                class="text-danger fs-12"
                [input]="targetUrl"
                [fieldLabel]="'Target URL'"
                [appFieldError]="ErrorSets.TargetUrl"
                [group]="createOrEditSubscriptionForm"
            ></div>

            <p class="text-muted fs-12">
                Must be publicly reachable via HTTPS. Localhost and private Ips are not allowed
            </p>
        </div>
        <div class="d-flex flex-column mt-3">
            <label for="" class="form-label">Subscribed events <span class="text-danger">*</span></label>
            <ng-select
                [items]="dropdownList"
                bindLabel="name"
                bindValue="value"
                formControlName="eventTypes"
                [multiple]="true"
                #eventTypes
            >
                <ng-template ng-option-tmp let-item="item" let-index="index">
                    <label class="fs-14 inline-block"> {{ item.name }} </label>
                </ng-template>
            </ng-select>
            <div
                class="text-danger fs-12"
                [input]="eventTypes"
                [fieldLabel]="'Event selection'"
                [appFieldError]="'required'"
                [fieldControl]="createOrEditSubscriptionForm.get('eventTypes')"
                [group]="createOrEditSubscriptionForm"
            ></div>
        </div>
        <div class="d-flex flex-column mt-4">
            <label for="" class="form-label">Label </label>
            <input #label type="text" data-test-id="target-url" formControlName="label" class="w-100 form-control" />
            <div
                class="text-danger fs-12"
                [input]="label"
                [fieldLabel]="'Label'"
                [appFieldError]="'maxlength'"
                [group]="createOrEditSubscriptionForm"
            ></div>
            <p class="text-muted fs-12">Optinal unique label to identify this webhook subscription</p>
        </div>
        <div class="d-flex flex-wrap justify-content-end my-3">
            <button class="btn btn-light me-4" (click)="cancel()" type="button">Cancel</button>
            <button
                class="btn btn-success"
                [disabled]="createOrEditSubscriptionForm.invalid"
                (click)="updateWebhook()"
                type="button"
            >
                Update subscription
            </button>
        </div>
    </div>
</form>
