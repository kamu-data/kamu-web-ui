<div class="content">
    <div
        *ngFor="let node of nodes | slice: 0:lastRunsCount"
        class="tile-item"
        [ngbPopover]="popContent"
        triggers="mouseenter:mouseleave"
        [openDelay]="300"
        [ngClass]="{
            completed: node.status === FlowStatus.Finished && node.outcome === FlowOutcome.Success,
            running:
                node.status === (FlowStatus.Queued || FlowStatus.Running || FlowStatus.Scheduled || FlowStatus.Waiting),
            failed: node.status === FlowStatus.Finished && node.outcome === FlowOutcome.Failed,
            aborted: node.status === FlowStatus.Finished && node.outcome === FlowOutcome.Aborted
        }"
    >
        <ng-template #popContent>
            <div class="fs-12 text-muted">
                <span class="fs-12 fw-bold">Initiator:</span>
                <span class="fs-12">
                    {{ node.initiator ? node.initiator.accountName : "system process" }}
                </span>
                <br />

                <span class="fs-12 fw-bold">Duration:</span>
                <span class="fs-12">
                    {{ durationTask(node.timing.runningSince!, node.timing.finishedAt!) }}
                </span>
                <br />

                <span class="fs-12 fw-bold">Outcome:</span>
                <span class="fs-12">
                    {{ node.outcome ? (node.outcome | lowercase) : "-" }}
                </span>
                <br />

                <span class="fs-12 fw-bold">Activated at:</span>
                <span class="fs-12 no-wrap">
                    {{ node.timing.activateAt | date: "M/d/yy, h:mm:ss a" }}
                </span>
                <br />
            </div>
        </ng-template>
    </div>
</div>
<div class="mt-1">
    <span class="fs-12 text-muted"> Show last {{ lastRunsCount }} runs</span>
</div>
