<div class="layout">
    <div class="mt-4">
        <div class="border border-1 mt-4 px-2 py-4 rounded-3">
            <form [formGroup]="pollingSourceForm">
                <ng-container *ngIf="currentStep === steps.FETCH">
                    <app-fetch-step
                        formGroupName="fetch"
                        [fetchUrlForm]="fetchUrlForm"
                        [fetchFilesGlobForm]="fetchFilesGlobForm"
                        [fetchContainerForm]="fetchContainerForm"
                    ></app-fetch-step>
                    <div class="d-flex mt-4 justify-content-center">
                        <button
                            class="btn btn-primary"
                            [disabled]="!fetchUrlForm.valid"
                            (click)="changeStep(steps.READ)"
                        >
                            Next
                        </button>
                    </div>
                </ng-container>
                <ng-container *ngIf="currentStep === steps.READ">
                    <div formGroupName="read">
                        <h2 class="text-center">Read</h2>
                        <div class="radio-group mt-4">
                            <div
                                class="input-container"
                                *ngFor="let step of readStepRadioData"
                            >
                                <input
                                    formControlName="kind"
                                    class="radio-input"
                                    type="radio"
                                    [id]="step.id"
                                    [value]="step.value"
                                />
                                <div class="radio-item">
                                    <mat-icon class="mat-icon">{{
                                        step.icon
                                    }}</mat-icon>
                                    <label [for]="step.id">{{
                                        step.label
                                    }}</label>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 row">
                            <div
                                *ngIf="
                                    readCsvForm.controls['kind'].value === 'csv'
                                "
                            >
                                <div class="col-md-8 offset-md-2">
                                    <label
                                        for="read-separator"
                                        class="form-label"
                                        >Separator
                                    </label>
                                    <input
                                        class="form-control"
                                        id="read-separator"
                                        placeholder="Please enter separator..."
                                        formControlName="separator"
                                        data-test-id="read-separator"
                                    />
                                </div>
                            </div>
                        </div>
                        <div class="d-flex mt-4 justify-content-center">
                            <button
                                class="btn btn-primary me-4"
                                (click)="changeStep(steps.FETCH)"
                            >
                                Previous
                            </button>
                            <button
                                class="btn btn-primary"
                                (click)="changeStep(steps.MERGE)"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="currentStep === steps.MERGE">
                    <div formGroupName="merge">
                        <h2 class="text-center">Merge</h2>
                        <div class="radio-group mt-4">
                            <div
                                class="input-container"
                                *ngFor="let step of mergeStepRadioData"
                            >
                                <input
                                    formControlName="kind"
                                    class="radio-input"
                                    type="radio"
                                    [id]="step.id"
                                    [value]="step.value"
                                />
                                <div class="radio-item">
                                    <mat-icon class="mat-icon">{{
                                        step.icon
                                    }}</mat-icon>
                                    <label [for]="step.id">{{
                                        step.label
                                    }}</label>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex mt-4 justify-content-center">
                            <button
                                class="btn btn-primary me-4"
                                (click)="changeStep(steps.READ)"
                            >
                                Previous
                            </button>

                            <button class="button-save" (click)="onSubmit()">
                                Save
                            </button>
                            <button
                                class="btn btn-outline-primary ms-4"
                                (click)="onEditYaml()"
                            >
                                Edit Yaml
                            </button>
                        </div>
                    </div>
                </ng-container>
            </form>
        </div>
    </div>

    <pre>{{ pollingSourceForm.value | json }}</pre>
</div>
