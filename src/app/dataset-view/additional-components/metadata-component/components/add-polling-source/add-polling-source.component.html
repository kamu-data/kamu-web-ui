<div class="layout">
    <div class="mt-4">
        <div class="border border-1 mt-4 px-2 py-4 rounded-3">
            <form [formGroup]="pollingSourceForm">
                <ng-container *ngIf="currentStep === steps.FETCH">
                    <app-fetch-step
                        formGroupName="fetch"
                        [fetchUrlForm]="fetchUrlForm"
                        [fetchFilesGlobForm]="fetchFilesGlobForm"
                        [fetchContainerForm]="fetchContainerForm"
                    ></app-fetch-step>
                    <div class="d-flex mt-4 justify-content-center">
                        <button
                            class="btn btn-primary"
                            [disabled]="!fetchUrlForm.valid"
                            (click)="changeStep(steps.READ)"
                        >
                            Next
                        </button>
                    </div>
                </ng-container>
                <ng-container *ngIf="currentStep === steps.READ">
                    <app-read-step
                        formGroupName="read"
                        [readCsvForm]="readCsvForm"
                    ></app-read-step>
                    <div class="d-flex mt-4 justify-content-center">
                        <button
                            class="btn btn-primary me-4"
                            (click)="changeStep(steps.FETCH)"
                        >
                            Previous
                        </button>
                        <button
                            class="btn btn-primary"
                            (click)="changeStep(steps.MERGE)"
                        >
                            Next
                        </button>
                    </div>
                </ng-container>
                <ng-container *ngIf="currentStep === steps.MERGE">
                    <app-merge-step formGroupName="merge"></app-merge-step>
                    <div class="d-flex mt-4 justify-content-center">
                        <button
                            class="btn btn-primary me-4"
                            (click)="changeStep(steps.READ)"
                        >
                            Previous
                        </button>

                        <button class="button-save" (click)="onSubmit()">
                            Save
                        </button>
                        <button
                            class="btn btn-outline-primary ms-4"
                            (click)="onEditYaml()"
                        >
                            Edit Yaml
                        </button>
                    </div>
                </ng-container>
            </form>
        </div>
    </div>

    <pre>{{ pollingSourceForm.value | json }}</pre>
</div>
