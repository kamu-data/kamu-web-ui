<div class="search-result-container__content" id="searchResultContainerContent">
    <div id="metadata-block">
        <div id="pagination-block" *ngIf="currentState">
            <app-custom-pagination
                [hash]="latestBlockhash"
                [date]="latestBlockSystemTime"
                [pageIndex]="currentPage"
                [limit]="5"
                [total]="totalPages"
                (pageChange)="onPageChange($event)"
            ></app-custom-pagination>
        </div>
        <h2>Schema</h2>
        <ng-template [ngIf]="currentState">
            <app-dynamic-table
                [hasTableHeader]="true"
                [tableSource]="currentState.schema.fields || []"
                [idTable]="'schema-block-table'"
            ></app-dynamic-table>
        </ng-template>
        <div
            *ngIf="
                datasetBasics &&
                datasetBasics.kind === 'DERIVATIVE' &&
                currentState &&
                currentState.metadata.metadata.currentTransform
            "
            class="mt-3"
        >
            <h2>Derivative Transformation</h2>
            <h3>Inputs:</h3>
            <ul>
                <li
                    class="app-mat-chip input-datasets-list"
                    *ngFor="
                        let input of currentState.metadata.metadata
                            .currentTransform.inputs;
                        let idx1 = index
                    "
                >
                    <mat-chip (click)="selectTopic(input.dataset.kind)">{{
                        input.dataset.kind
                    }}</mat-chip>
                    <a class="url" (click)="onClickDataset(input.dataset)"
                        >{{ input.dataset.owner.name }} /
                        {{ input.dataset.name }}</a
                    >
                </li>
            </ul>
            <h3>Queries:</h3>
            <div
                *ngFor="
                    let queryStep of currentState.metadata.metadata
                        .currentTransform.transform.queries
                "
                style="height: 400px"
            >
                <ngx-monaco-editor
                    style="height: 100%"
                    [options]="sqlEditorOptions"
                    [(ngModel)]="queryStep.query"
                ></ngx-monaco-editor>
            </div>
        </div>
        <div
            *ngIf="
                currentState && currentState.metadata.metadata.currentLicense
            "
        >
            <h2>License</h2>
            <p>
                <strong>ID:</strong>
                {{ currentState.metadata.metadata.currentLicense.shortName }}
            </p>
            <p>
                <strong>Name:</strong>
                {{ currentState.metadata.metadata.currentLicense.name }}
            </p>
            <p *ngIf="currentState.metadata.metadata.currentLicense.spdxId">
                <strong>SPDX ID:</strong>
                {{ currentState.metadata.metadata.currentLicense.spdxId }}
            </p>
            <p>
                <strong>Website: </strong>
                <a
                    data-test-id="navigateToWebsite"
                    class="url"
                    (click)="
                        navigateToWebsite(
                            currentState.metadata.metadata.currentLicense
                                .websiteUrl
                        )
                    "
                    >{{
                        currentState.metadata.metadata.currentLicense.websiteUrl
                    }}</a
                >
            </p>
        </div>
    </div>
</div>
