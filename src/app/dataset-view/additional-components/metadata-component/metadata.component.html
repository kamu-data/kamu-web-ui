<div class="search-result-container__content" id="searchResultContainerContent">
    <div id="metadata-block">
        <div id="pagination-block" *ngIf="datasetInfo && datasetInfo.metadata">
            <app-custom-pagination
                [hash]="
                    shortHash(
                        datasetInfo.metadata['chain'].blocks.nodes[0][
                            'blockHash'
                        ]
                    )
                "
                [date]="
                    momentConverDatetoLocalWithFormat(
                        datasetInfo.metadata['chain'].blocks.nodes[0][
                            'systemTime'
                        ]
                    )
                "
                [pageIndex]="currentPage"
                [limit]="5"
                [total]="pageInfo.totalPages || 1"
                (pageChange)="onPageChange($event)"
            ></app-custom-pagination>
        </div>
        <h2>Schema</h2>
        <ng-template [ngIf]="currentSchema">
            <app-dynamic-table
                [hasResultQuantity]="false"
                [isClickableRow]="false"
                [resultUnitText]="''"
                [hasTableHeader]="true"
                [tableSource]="currentSchema.fields || []"
                [idTable]="'schema-block-table'"
                (onSelectDatasetEmit)="(null)"
            ></app-dynamic-table>
        </ng-template>
        <div
            *ngIf="
                datasetInfo &&
                datasetInfo.kind === 'DERIVATIVE' &&
                datasetInfo.metadata.currentTransform
            "
            class="mt-3"
        >
            <h2>Derivative Transformation</h2>
            <h3>Inputs:</h3>
            <ul>
                <li
                    class="app-mat-chip input-datasets-list"
                    *ngFor="
                        let input of datasetInfo.metadata.currentTransform
                            .inputs;
                        let idx1 = index
                    "
                >
                    <mat-chip (click)="selectTopic(input.dataset.kind)">{{
                        input.dataset.kind
                    }}</mat-chip>
                    <a class="url" (click)="onClickDataset(input.dataset.id)"
                        >{{ input.dataset.owner.name }} /
                        {{ input.dataset.name }}</a
                    >
                </li>
            </ul>
            <h3>Queries:</h3>
            <div
                *ngFor="
                    let queryStep of datasetInfo.metadata.currentTransform
                        .transform.queries
                "
                style="height: 400px"
            >
                <ngx-monaco-editor
                    style="height: 100%"
                    [options]="sqlEditorOptions"
                    [(ngModel)]="queryStep.query"
                ></ngx-monaco-editor>
            </div>
        </div>
        <div *ngIf="datasetInfo && datasetInfo.metadata.currentLicense">
            <h2>License</h2>
            <p>
                <strong>ID:</strong>
                {{ datasetInfo.metadata.currentLicense.shortName }}
            </p>
            <p>
                <strong>Name:</strong>
                {{ datasetInfo.metadata.currentLicense.name }}
            </p>
            <p *ngIf="datasetInfo.metadata.currentLicense.spdxId">
                <strong>SPDX ID:</strong>
                {{ datasetInfo.metadata.currentLicense.spdxId }}
            </p>
            <p>
                <strong>Website:</strong>
                <a (click)="showWebsite(datasetInfo.metadata.currentLicense.websiteUrl)">{{
                    datasetInfo.metadata.currentLicense.websiteUrl
                }}</a>
            </p>
        </div>
    </div>
</div>
